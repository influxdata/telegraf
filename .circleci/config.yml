version: 2.1

jobs:
  package-sign-windows:
    machine:
      image: ubuntu-2204:current
    resource_class: large
    steps:
      - checkout
      - run:
          name: "Get Windows zip file"
          command: |
            mkdir -p ./build/dist
            wget https://dl.influxdata.com/telegraf/nightlies/telegraf-nightly_windows_amd64.zip -O ./build/dist/telegraf-nightly_windows_amd64.zip
      - run:
          name: "Sign Windows Executables"
          command: |
            ./scripts/sign-windows.sh

workflows:
  version: 2
  ci:
    jobs:
      - 'package-sign-windows'
