[[inputs.file]]
  files = ["./testcases/json_array_indexing/test.json"]
  data_format = "xpath_json"

  xpath_native_types = true

  [[inputs.file.xpath]]
    metric_name = "'nvme'"

    [inputs.file.xpath.tags]
      device = "string(/device/name)"
      model_name = "string(/model_name)"
      serial_number = "string(/serial_number)"

    [inputs.file.xpath.fields_int]
      # Test accessing array elements by index - this is the fix for issue #18145
      ns1_id = "number(//nvme_namespaces[1]/id)"
      ns1_capacity = "number(//nvme_namespaces[1]/capacity/bytes)"
      ns1_utilization = "number(//nvme_namespaces[1]/utilization/bytes)"
      ns2_id = "number(//nvme_namespaces[2]/id)"
      ns2_capacity = "number(//nvme_namespaces[2]/capacity/bytes)"
