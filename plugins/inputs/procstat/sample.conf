# Monitor process cpu and memory usage
[[inputs.procstat]]
  ## PID file to monitor process
  pid_file = "/var/run/nginx.pid"
  ## executable name (ie, pgrep <exe>)
  # exe = "nginx"
  ## pattern as argument for pgrep (ie, pgrep -f <pattern>)
  # pattern = "nginx"
  ## user as argument for pgrep (ie, pgrep -u <user>)
  # user = "nginx"
  ## Systemd unit name, supports globs when include_systemd_children is set to true
  # systemd_unit = "nginx.service"
  # include_systemd_children = false
  ## CGroup name or path, supports globs
  # cgroup = "systemd/system.slice/nginx.service"

  ## Windows service name
  # win_service = ""

  ## override for process_name
  ## This is optional; default is sourced from /proc/<pid>/status
  # process_name = "bar"

  ## Field name prefix
  # prefix = ""

  ## When true add the full cmdline as a tag.
  # cmdline_tag = false

  ## Mode to use when calculating CPU usage. Can be one of 'solaris' or 'irix'.
  # mode = "irix"

  ## Add the PID as a tag instead of as a field.  When collecting multiple
  ## processes with otherwise matching tags this setting should be enabled to
  ## ensure each process has a unique identity.
  ##
  ## Enabling this option may result in a large number of series, especially
  ## when processes have a short lifetime.
  # pid_tag = false

  ## Method to use when finding process IDs.  Can be one of 'pgrep', or
  ## 'native'.  The pgrep finder calls the pgrep executable in the PATH while
  ## the native finder performs the search directly in a manor dependent on the
  ## platform.  Default is 'pgrep'
  # pid_finder = "pgrep"

  ## Select which extra metrics should be added:
  ##  - "threads": to enable collection of number of file descriptors
  ##  - "fds": to enable collection of context switches
  ##  - "ctx_switches": to enable collection of page faults
  ##  - "page_faults": to enable collection of IO
  ##  - "io": to enable collection of proc creation time
  ##  - "create_time": to enable collection of CPU time used
  ##  - "cpu": to enable collection of percentage of CPU used
  ##  - "cpu_percent": to enable collection of memory used
  ##  - "mem": to enable collection of memory percentage used
  ##  - "mem_percent": to enable collection of procs' limits
  ##  - "limits": to enable collection of procs' limits
  ##  - "tcp_stats": tcp_* and upd_socket metrics
  ##  - "connections_endpoints": new metric procstat_tcp with connections and listeners endpoints
  ## Default value:
  # metrics_include = [
  #  "threads",
  #  "fds",
  #  "ctx_switches",
  #  "page_faults",
  #  "io",
  #  "create_time",
  #  "cpu",
  #  "cpu_percent",
  #  "mem",
  #  "mem_percent",
  #  "limits",
  # ]
