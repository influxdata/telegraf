machine:
  go:
    version: 1.8.1
  environment:
    CIRCLE_RELEASE_URL: "https://github.com/orangesys/telegraf-output-orangesys"
  services:
    - docker
    - memcached
    - redis
    - rabbitmq-server

dependencies:
  override:
    - docker info

checkout:
  post:
    - git submodule sync --recursive
    - git submodule update --recursive --init

test:
  override:
    - bash scripts/orangesys-telegraf.sh

deployment:
  master:
    branch: master
    commands:
      - bash scripts/github-release.sh
