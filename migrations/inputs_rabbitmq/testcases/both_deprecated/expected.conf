# RabbitMQ plugin with migrated options
[[inputs.rabbitmq]]
  ## Management Plugin url. (default: http://localhost:15672)
  url = "http://rabbitmq-cluster.company.com:15672"

  ## Deprecated name option removed - use global tags configuration instead

  ## Credentials
  username = "monitoring"
  password = "monitor123"

  ## Optional TLS Config - all commented out to avoid file validation in tests
  # tls_ca = "/etc/ssl/certs/ca-certificates.crt"
  # tls_cert = "/etc/telegraf/cert.pem"
  # tls_key = "/etc/telegraf/key.pem"
  insecure_skip_verify = false

  ## Optional request timeouts
  header_timeout = "3s"
  client_timeout = "4s"

  ## A list of nodes to gather as the rabbitmq_node measurement
  nodes = ["rabbit@primary", "rabbit@secondary", "rabbit@tertiary"]

  ## Migrated from queues option
  queue_name_include = ["critical.*", "alerts.*", "monitoring.*"]

  ## A list of exchanges to gather as the rabbitmq_exchange measurement
  exchanges = ["events", "notifications", "logs"]

  ## Metrics to include and exclude. Globs accepted.
  metric_include = ["queue", "exchange", "overview", "node"]
  metric_exclude = ["federation"]

  ## Federation upstreams to include and exclude
  federation_upstream_include = ["upstream1", "upstream2"]
  federation_upstream_exclude = ["test.*"]